import{o as f}from"./index-CbdBNPNQ.js";const m="https://api.spotify.com/v1";async function y(s,n,u=20){const i=await f(s);if(!i)return console.warn("No Spotify access token available - user may need to reconnect"),[];try{const t=new URLSearchParams({q:n,type:"track",limit:Math.min(u,50).toString(),market:"US"}),r=await fetch(`${m}/search?${t}`,{headers:{Authorization:`Bearer ${i}`}});return r.ok?(await r.json()).tracks.items.map(e=>{var o,c,p;return{id:`spotify:${e.id}`,title:e.name,artist:e.artists.map(l=>l.name).join(", "),artists:e.artists.map(l=>l.name),album:e.album.name,cover_url:(o=e.album.images[0])==null?void 0:o.url,artwork_url:(c=e.album.images[0])==null?void 0:c.url,duration_ms:e.duration_ms,preview_url:e.preview_url,spotify_id:e.id,url_spotify_web:e.external_urls.spotify,url_spotify_app:e.uri,provider:"spotify",external_id:e.id,isrc:(p=e.external_ids)==null?void 0:p.isrc}}):(r.status===401?console.error("Spotify token invalid - user needs to reconnect"):console.error("Spotify search failed:",r.status,await r.text()),[])}catch(t){return console.error("Error searching Spotify:",t),[]}}async function _(s,n){var i,t,r;const u=await f(s);if(!u)return console.warn("No Spotify access token available - user may need to reconnect"),null;try{const a=await fetch(`${m}/tracks/${n}`,{headers:{Authorization:`Bearer ${u}`}});if(!a.ok)return console.error("Spotify track fetch failed:",a.status),null;const e=await a.json();return{id:`spotify:${e.id}`,title:e.name,artist:e.artists.map(o=>o.name).join(", "),artists:e.artists.map(o=>o.name),album:e.album.name,cover_url:(i=e.album.images[0])==null?void 0:i.url,artwork_url:(t=e.album.images[0])==null?void 0:t.url,duration_ms:e.duration_ms,preview_url:e.preview_url,spotify_id:e.id,url_spotify_web:e.external_urls.spotify,url_spotify_app:e.uri,provider:"spotify",external_id:e.id,isrc:(r=e.external_ids)==null?void 0:r.isrc}}catch(a){return console.error("Error fetching Spotify track:",a),null}}async function w(s){return console.warn("YouTube API key not configured"),null}async function h(s,n){return console.warn("YouTube API key not configured"),[]}export{h as a,w as b,_ as g,y as s};
