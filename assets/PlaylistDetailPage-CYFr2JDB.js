import{c as O,N as R,a as G,u as H,r,j as e,L as $,B as a,P as T,e as l}from"./index-BI6e5KKd.js";import{P as h}from"./PageLayout-DTmVMGDo.js";import{C as j,d as u}from"./card-CVttam_D.js";import{D as q,a as J,b as K,c as Q,f as V,d as W}from"./dialog-CATSB1n_.js";import{I as X}from"./input-D6t92-pF.js";import{L as n}from"./label-C_oASRYj.js";import{T as Y}from"./textarea-yoZM0u9c.js";import{S as _}from"./switch-jmWW_fB_.js";import{T as Z}from"./TrackCard-DQCONBaN.js";import{d as ee,e as se,f as ie}from"./usePlaylists-8j_F8vnh.js";import{D as ae,a as te,b as re,c as S,P as le,d as ce}from"./TrackComments-CtkKmXdi.js";import{S as ne}from"./share-2-DOXsRuWz.js";import{T as E}from"./trash-2-xVWoPPMJ.js";import{G as oe,L as de}from"./lock-NrJ9y5In.js";import{U as me}from"./users-CmLvYiYM.js";import"./BottomNav-DrspHnQU.js";import"./search-B6yafTIf.js";import"./CladeIcon-dFdl9Xxq.js";import"./index-B9TUITdl.js";import"./Combination-CjLqDtlN.js";import"./index-DLARNePZ.js";import"./ChordBadge-CpdYEsQY.js";import"./rotate-ccw-BU-JZZl7.js";import"./music-kwvnLi8E.js";import"./avatar-3tZON9LW.js";import"./scroll-area-0UcrOe2s.js";import"./index-BeP1845I.js";import"./index-BdQq_4o_.js";import"./useFollowing-B203wJuQ.js";import"./useMutation-De3Hf5hC.js";import"./index-_2dnxds6.js";import"./map-pin-C1964AYS.js";import"./radio-BSle07YB.js";import"./formatDistanceToNow-3UBXKcFR.js";import"./en-US-wfBU2YNu.js";import"./check-ChXx28qk.js";import"./twitter-DU2wPq_q.js";import"./send-CyFpBjwX.js";import"./QuickStreamButtons-Bv0D4LiA.js";import"./providers-CHelMshW.js";import"./youtubeSearchService-C_W3FhdG.js";import"./timeFormat-BXo_t6_Q.js";import"./music-2-B_Dssdoi.js";import"./sparkles-BmjmEley.js";import"./heart-CutDkfLo.js";import"./waves-0CI_rh8K.js";import"./bookmark-DSJVki65.js";import"./badge-BU1YdHVn.js";import"./index-D_raKJPF.js";import"./chevron-right-CWmwnNKF.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=O("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);function os(){var C,P,D;const{playlistId:t}=R(),{user:o}=G(),d=H(),[F,c]=r.useState(!1),[f,g]=r.useState(""),[y,v]=r.useState(""),[N,b]=r.useState(!0),[k,w]=r.useState(!1),{data:s,isLoading:L}=ee(t),m=se(),I=ie(),p=(s==null?void 0:s.user_id)===(o==null?void 0:o.id),A=()=>{s&&(g(s.name),v(s.description||""),b(s.is_public),w(s.is_collaborative),c(!0))},z=async()=>{if(t)try{await m.mutateAsync({playlistId:t,updates:{name:f,description:y||null,is_public:N,is_collaborative:k}}),l.success("Playlist updated"),c(!1)}catch(i){l.error("Failed to update playlist"),console.error(i)}},M=async i=>{if(t)try{await I.mutateAsync({playlistId:t,trackId:i}),l.success("Track removed from playlist")}catch(B){l.error("Failed to remove track"),console.error(B)}},U=()=>{const i=window.location.href;navigator.clipboard.writeText(i),l.success("Playlist link copied to clipboard")};if(L)return e.jsx(h,{title:"Loading...",children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx($,{})})});if(!s)return e.jsx(h,{title:"Not Found",children:e.jsx(j,{children:e.jsxs(u,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"Playlist not found"}),e.jsx(a,{onClick:()=>d("/playlists"),children:"Back to Playlists"})]})})});const x=((C=s.playlist_tracks)==null?void 0:C.map(i=>i.track))||[];return e.jsxs(h,{title:s.name,headerActions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a,{variant:"ghost",size:"sm",onClick:U,children:e.jsx(ne,{className:"w-4 h-4"})}),p&&e.jsxs(ae,{children:[e.jsx(te,{asChild:!0,children:e.jsx(a,{variant:"ghost",size:"icon",children:e.jsx(pe,{className:"w-4 h-4"})})}),e.jsxs(re,{align:"end",children:[e.jsxs(S,{onClick:A,children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"Edit Playlist"]}),e.jsx(ce,{}),e.jsxs(S,{className:"text-destructive",onClick:()=>{confirm("Delete this playlist? This cannot be undone.")&&d("/playlists")},children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"Delete Playlist"]})]})]})]}),children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx(j,{children:e.jsx(u,{className:"pt-6",children:e.jsxs("div",{className:"flex gap-6",children:[e.jsx("div",{className:"w-48 h-48 rounded-lg flex-shrink-0 flex items-center justify-center",style:{background:s.cover_url?`url(${s.cover_url}) center/cover`:s.cover_color||"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:!s.cover_url&&e.jsx(T,{className:"w-16 h-16 text-white/60"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-2",children:[s.is_public?e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"w-4 h-4"}),e.jsx("span",{children:"Public Playlist"})]}):e.jsxs(e.Fragment,{children:[e.jsx(de,{className:"w-4 h-4"}),e.jsx("span",{children:"Private Playlist"})]}),s.is_collaborative&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsx(me,{className:"w-4 h-4"}),e.jsx("span",{children:"Collaborative"})]})]}),e.jsx("h1",{className:"text-4xl font-bold mb-3",children:s.name}),s.description&&e.jsx("p",{className:"text-muted-foreground mb-4",children:s.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("span",{children:["Created by"," ",e.jsx("span",{className:"font-medium",children:((P=s.owner)==null?void 0:P.username)||"Unknown"})]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:[x.length," tracks"]}),s.play_count>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsxs("span",{children:[s.play_count," plays"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(a,{size:"lg",className:"gap-2",children:[e.jsx(T,{className:"w-5 h-5"}),"Play All"]}),s.is_collaborative&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:[((D=s.playlist_collaborators)==null?void 0:D.length)||0," collaborators"]})]})]})]})})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Tracks"}),x.length===0?e.jsx(j,{children:e.jsxs(u,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"No tracks in this playlist yet"}),p&&e.jsx(a,{onClick:()=>d("/search"),children:"Browse Tracks"})]})}):e.jsx("div",{className:"grid grid-cols-1 gap-4",children:x.map(i=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1",children:e.jsx(Z,{track:i})}),p&&e.jsx(a,{variant:"ghost",size:"icon",onClick:()=>M(i.id),children:e.jsx(E,{className:"w-4 h-4"})})]},i.id))})]})]}),e.jsx(q,{open:F,onOpenChange:c,children:e.jsxs(J,{children:[e.jsxs(K,{children:[e.jsx(Q,{children:"Edit Playlist"}),e.jsx(V,{children:"Update your playlist details"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"edit-name",children:"Playlist Name"}),e.jsx(X,{id:"edit-name",value:f,onChange:i=>g(i.target.value),maxLength:100})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"edit-description",children:"Description"}),e.jsx(Y,{id:"edit-description",value:y,onChange:i=>v(i.target.value),rows:3})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(n,{htmlFor:"edit-public",children:"Public"}),e.jsx(_,{id:"edit-public",checked:N,onCheckedChange:b})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(n,{htmlFor:"edit-collaborative",children:"Collaborative"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Allow others to add tracks"})]}),e.jsx(_,{id:"edit-collaborative",checked:k,onCheckedChange:w})]})]}),e.jsxs(W,{children:[e.jsx(a,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),e.jsx(a,{onClick:z,disabled:m.isPending,children:m.isPending?"Saving...":"Save Changes"})]})]})})]})}export{os as default};
