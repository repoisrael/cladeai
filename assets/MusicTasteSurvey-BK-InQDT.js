import{c as C,u as M,k as T,r as c,j as t,m as r,B as b,s as g}from"./index-74tJdIi1.js";import{C as h}from"./card-C0BWnzRG.js";import{M as l}from"./music-D2oC_fJb.js";import{M as f,G as n}from"./mic-vocal-CL1BN_UH.js";import{S as d}from"./sparkles-CJFnw2Ka.js";import{T as v}from"./trending-up-Bv20XaQC.js";import{H as y}from"./heart-DtkJQQu7.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=C("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]),G=[{id:"hip-hop",label:"Hip Hop",icon:f,color:"text-orange-500"},{id:"rock",label:"Rock",icon:n,color:"text-red-500"},{id:"pop",label:"Pop",icon:d,color:"text-pink-500"},{id:"jazz",label:"Jazz",icon:l,color:"text-blue-500"},{id:"electronic",label:"Electronic",icon:v,color:"text-purple-500"},{id:"rb-soul",label:"R&B/Soul",icon:y,color:"text-rose-500"},{id:"classical",label:"Classical",icon:l,color:"text-amber-500"},{id:"country",label:"Country",icon:n,color:"text-yellow-600"},{id:"reggae",label:"Reggae",icon:l,color:"text-green-500"},{id:"metal",label:"Metal",icon:n,color:"text-gray-500"},{id:"indie",label:"Indie",icon:d,color:"text-teal-500"},{id:"folk",label:"Folk",icon:n,color:"text-emerald-600"}],z=[{id:"discovery",label:"Always discovering new music",icon:d},{id:"mood-based",label:"Listen based on my mood",icon:y},{id:"albums",label:"Prefer full albums over singles",icon:l},{id:"playlists",label:"Create & follow playlists",icon:v},{id:"live",label:"Love live performances",icon:f},{id:"background",label:"Music as background",icon:j}];function I(){const m=M(),{toast:o}=T(),[i,k]=c.useState([]),[p,N]=c.useState([]),[u,x]=c.useState(!1),w=e=>{k(s=>s.includes(e)?s.filter(a=>a!==e):[...s,e])},S=e=>{N(s=>s.includes(e)?s.filter(a=>a!==e):[...s,e])},H=async()=>{if(i.length===0){o({title:"Select at least one genre",description:"Help us understand your music taste",variant:"destructive"});return}x(!0);try{const{data:{user:e}}=await g.auth.getUser();if(!e){o({title:"Not authenticated",description:"Please sign in first",variant:"destructive"});return}const{error:s}=await g.from("profiles").update({music_genres:i,listening_habits:p,onboarding_completed:!0}).eq("id",e.id);if(s)throw s;o({title:"Preferences saved!",description:"Your music taste has been recorded"}),m("/")}catch(e){console.error("Error saving preferences:",e),o({title:"Failed to save preferences",description:"Please try again",variant:"destructive"})}finally{x(!1)}};return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-orange-50 dark:from-gray-900 dark:via-purple-900/20 dark:to-gray-900 p-4 md:p-8",children:t.jsxs(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-4xl mx-auto",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx(r.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring"},className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 text-white text-4xl mb-4",children:"ðŸŽµ"}),t.jsx("h1",{className:"text-4xl font-bold mb-2",children:"What music moves you?"}),t.jsx("p",{className:"text-muted-foreground",children:"Help us personalize your experience by sharing your music taste"})]}),t.jsxs(h,{className:"p-6 mb-6",children:[t.jsxs("h2",{className:"text-2xl font-bold mb-4 flex items-center gap-2",children:[t.jsx(l,{className:"h-6 w-6"}),"Favorite Genres"]}),t.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Select all that apply (choose at least one)"}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:G.map(e=>{const s=e.icon,a=i.includes(e.id);return t.jsxs(r.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>w(e.id),className:`p-4 rounded-xl border-2 transition-all ${a?"border-purple-500 bg-purple-500/10 shadow-lg":"border-border hover:border-purple-300"}`,children:[t.jsx(s,{className:`h-6 w-6 mx-auto mb-2 ${a?"text-purple-500":e.color}`}),t.jsx("span",{className:`text-sm font-semibold ${a?"text-purple-600 dark:text-purple-400":""}`,children:e.label})]},e.id)})})]}),t.jsxs(h,{className:"p-6 mb-6",children:[t.jsxs("h2",{className:"text-2xl font-bold mb-4 flex items-center gap-2",children:[t.jsx(j,{className:"h-6 w-6"}),"How do you listen?"]}),t.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Tell us about your listening habits (optional)"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:z.map(e=>{const s=e.icon,a=p.includes(e.id);return t.jsxs(r.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>S(e.id),className:`p-4 rounded-xl border-2 transition-all text-left flex items-center gap-3 ${a?"border-pink-500 bg-pink-500/10":"border-border hover:border-pink-300"}`,children:[t.jsx(s,{className:`h-5 w-5 ${a?"text-pink-500":"text-muted-foreground"}`}),t.jsx("span",{className:`text-sm font-medium ${a?"text-pink-600 dark:text-pink-400":""}`,children:e.label})]},e.id)})})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx(b,{variant:"ghost",onClick:()=>m("/"),className:"text-muted-foreground",children:"Skip for now"}),t.jsx(b,{size:"lg",onClick:H,disabled:u||i.length===0,className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-8",children:u?"Saving...":"Continue"})]})]})})}export{I as MusicTasteSurvey};
