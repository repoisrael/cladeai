import{g as v,$ as b,u as w,j as e,B as g,M as o,m as n}from"./index-CeBvdGEW.js";import{B as j}from"./BottomNav-CYV2yjcU.js";import{A as m}from"./arrow-left-nRD5056e.js";import{A as N}from"./arrow-right-Dq6Bb7It.js";import{T as k}from"./trending-up-CmTRPX9K.js";import{L as _}from"./link-rUiNwlBi.js";import"./menu-BfjD-vix.js";import"./search-DPVAO1Be.js";function C(t){return v({queryKey:["track-connections",t],queryFn:async()=>t?(console.log("useTrackConnections: Waiting for track_connections table",t),{track:{id:t,title:"",artist:""},upstream:[],downstream:[]}):null,enabled:!!t})}const d={sample:{label:"Sample",icon:"ðŸŽµ",color:"text-blue-500"},cover:{label:"Cover",icon:"ðŸŽ¤",color:"text-green-500"},interpolation:{label:"Interpolation",icon:"ðŸŽ¹",color:"text-purple-500"},remix:{label:"Remix",icon:"ðŸ”„",color:"text-orange-500"},inspiration:{label:"Inspiration",icon:"ðŸ’¡",color:"text-yellow-500"}};function E(){const{trackId:t}=b(),r=w(),{data:h,isLoading:y}=C(t);if(y)return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"})});if(!h)return e.jsxs("div",{className:"min-h-screen bg-background pb-24",children:[e.jsx("header",{className:"sticky top-0 z-40 glass-strong safe-top",children:e.jsxs("div",{className:"px-4 py-4 max-w-lg mx-auto flex items-center gap-3",children:[e.jsx(g,{variant:"ghost",size:"icon",onClick:()=>r(-1),children:e.jsx(m,{className:"w-5 h-5"})}),e.jsx("h1",{className:"text-xl font-bold",children:"Connections"})]})}),e.jsxs("main",{className:"px-4 py-8 max-w-lg mx-auto text-center",children:[e.jsx(o,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"Track not found"})]}),e.jsx(j,{})]});const{track:i,upstream:c,downstream:l,most_popular_derivative:x}=h,u=c.length>0,f=l.length>0;return e.jsxs("div",{className:"min-h-screen bg-background pb-24",children:[e.jsx("header",{className:"sticky top-0 z-40 glass-strong safe-top",children:e.jsxs("div",{className:"px-4 py-4 max-w-lg mx-auto flex items-center gap-3",children:[e.jsx(g,{variant:"ghost",size:"icon",onClick:()=>r(-1),children:e.jsx(m,{className:"w-5 h-5"})}),e.jsx("h1",{className:"text-xl font-bold",children:"Connections"})]})}),e.jsxs("main",{className:"px-4 py-4 max-w-lg mx-auto space-y-6",children:[e.jsx(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-6 glass rounded-2xl",children:e.jsxs("div",{className:"flex items-center gap-4",children:[i.cover_url&&e.jsx("img",{src:i.cover_url,alt:i.title,className:"w-20 h-20 rounded-xl object-cover"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{className:"font-bold text-lg truncate",children:i.title}),e.jsx("p",{className:"text-muted-foreground truncate",children:i.artist}),e.jsxs("div",{className:"flex gap-2 mt-2 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(N,{className:"w-3 h-3"}),l.length," downstream"]}),u&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(m,{className:"w-3 h-3"}),c.length," upstream"]})]})]})]})}),x&&e.jsxs(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05},className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-muted-foreground",children:[e.jsx(k,{className:"w-4 h-4"}),"Most Popular Derivative"]}),e.jsx("div",{className:"p-4 glass rounded-2xl",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 rounded-lg bg-muted flex items-center justify-center",children:e.jsx(o,{className:"w-8 h-8 text-muted-foreground"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium truncate",children:x.title}),e.jsx("p",{className:"text-sm text-muted-foreground truncate",children:x.artist})]})]})})]}),u&&e.jsxs(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-muted-foreground",children:[e.jsx(m,{className:"w-4 h-4"}),"This song comes from (",c.length,")"]}),e.jsx("div",{className:"space-y-2",children:c.map((s,p)=>{const a=d[s.connection_type]||d.sample;return e.jsx(n.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.15+p*.05},className:"p-4 glass rounded-2xl cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>r(`/connections/${s.from_track_id}`),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-14 h-14 rounded-lg bg-muted flex items-center justify-center",children:e.jsx(o,{className:"w-7 h-7 text-muted-foreground"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("span",{className:`text-xs font-medium ${a.color}`,children:[a.icon," ",a.label]}),s.confidence&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:[Math.round(s.confidence*100),"%"]})]}),e.jsxs("h3",{className:"font-medium truncate text-sm",children:["Track ",s.from_track_id.slice(0,8)]}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:"Connection source"})]})]})},s.id)})})]}),f&&e.jsxs(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.15},className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-muted-foreground",children:[e.jsx(N,{className:"w-4 h-4"}),"This song influenced (",l.length,")"]}),e.jsx("div",{className:"space-y-2",children:l.map((s,p)=>{const a=d[s.connection_type]||d.sample;return e.jsx(n.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2+p*.05},className:"p-4 glass rounded-2xl cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>r(`/connections/${s.to_track_id}`),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-14 h-14 rounded-lg bg-muted flex items-center justify-center",children:e.jsx(o,{className:"w-7 h-7 text-muted-foreground"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("span",{className:`text-xs font-medium ${a.color}`,children:[a.icon," ",a.label]}),s.confidence&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:[Math.round(s.confidence*100),"%"]})]}),e.jsxs("h3",{className:"font-medium truncate text-sm",children:["Track ",s.to_track_id.slice(0,8)]}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:"Derivative work"})]})]})},s.id)})})]}),!u&&!f&&e.jsxs(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"text-center py-12",children:[e.jsx(_,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground opacity-50"}),e.jsx("p",{className:"text-muted-foreground",children:"No connections found yet"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Be the first to add a connection!"})]})]}),e.jsx(j,{})]})}export{E as default};
