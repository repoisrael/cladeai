import{a as M,u as O,r,j as e,L as B,B as t,e as c}from"./index-DJstQ7TQ.js";import{P as I}from"./PageLayout-Bz3y_LaD.js";import{C as f,a as U,b as $,c as E,d as N}from"./card-D-I2NjNj.js";import{D as G,a as H,b as q,c as R,f as Y,d as J}from"./dialog-DxN91JXZ.js";import{I as K}from"./input-DVA_3WqA.js";import{L as u}from"./label-CwTAQOyR.js";import{T as Q}from"./textarea-BlwG3ARs.js";import{S as V}from"./switch-DOlDwAWF.js";import{u as W,a as X,b as Z,c as ee}from"./usePlaylists-BKhqiHvu.js";import{M as P}from"./music-BcculZu3.js";import{U as se}from"./users-D6SjDL31.js";import{G as b,L as ae}from"./lock-DQcWPemg.js";import{T as te}from"./trash-2-DiP6QbiA.js";import{P as v}from"./plus-DSRXFmPe.js";import{f as ie}from"./formatDistanceToNow-3UBXKcFR.js";import"./BottomNav-BBt5RMVb.js";import"./search-DBI_ibCX.js";import"./CladeIcon-BwtohWFc.js";import"./index-BE1YbhaS.js";import"./Combination-BmfH-Aw2.js";import"./index-fRGGzGs9.js";import"./useMutation-BMXGyvN9.js";import"./en-US-wfBU2YNu.js";function Le(){const{user:i}=M(),w=O(),[C,l]=r.useState(!1),[o,h]=r.useState(""),[x,p]=r.useState(""),[j,y]=r.useState(!0),[a,g]=r.useState(!1),{data:D,isLoading:k}=W(i==null?void 0:i.id),{data:L,isLoading:S}=X(20),n=Z(),_=ee(),T=async()=>{if(!o.trim()){c.error("Please enter a playlist name");return}try{await n.mutateAsync({name:o,description:x||void 0,is_public:j}),c.success("Playlist created successfully"),l(!1),h(""),p(""),y(!0)}catch(s){c.error("Failed to create playlist"),console.error(s)}},z=async(s,m)=>{if(confirm(`Delete playlist "${m}"? This cannot be undone.`))try{await _.mutateAsync(s),c.success("Playlist deleted")}catch(A){c.error("Failed to delete playlist"),console.error(A)}},d=a?L:D,F=a?S:k;return e.jsxs(I,{title:"Playlists",headerActions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(t,{variant:a?"outline":"ghost",size:"sm",onClick:()=>g(!1),children:"My Playlists"}),e.jsxs(t,{variant:a?"ghost":"outline",size:"sm",onClick:()=>g(!0),children:[e.jsx(b,{className:"w-4 h-4 mr-1"}),"Discover"]}),!a&&e.jsxs(t,{onClick:()=>l(!0),size:"sm",children:[e.jsx(v,{className:"w-4 h-4 mr-1"}),"New Playlist"]})]}),children:[e.jsx("div",{className:"space-y-6",children:F?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsx(B,{size:"lg"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-4",children:a?"Loading public playlists...":"Loading your playlists..."})]}):d&&d.length>0?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-4",children:d.map(s=>e.jsxs(f,{className:"cursor-pointer hover:bg-accent/50 transition-colors",onClick:()=>w(`/playlist/${s.id}`),children:[e.jsxs(U,{className:"pb-3",children:[e.jsx("div",{className:"w-full aspect-square rounded-lg mb-3 flex items-center justify-center",style:{background:s.cover_url?`url(${s.cover_url}) center/cover`:s.cover_color||"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:!s.cover_url&&e.jsx(P,{className:"w-12 h-12 text-white/60"})}),e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx($,{className:"text-lg truncate",children:s.name}),e.jsxs(E,{className:"flex items-center gap-2 mt-1",children:[e.jsxs("span",{children:[s.track_count||0," tracks"]}),s.is_collaborative&&e.jsx(se,{className:"w-3 h-3"}),s.is_public?e.jsx(b,{className:"w-3 h-3"}):e.jsx(ae,{className:"w-3 h-3"})]})]})})]}),e.jsxs(N,{children:[s.description&&e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-3",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Updated ",ie(new Date(s.updated_at),{addSuffix:!0})]}),!a&&s.user_id===(i==null?void 0:i.id)&&e.jsx(t,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:m=>{m.stopPropagation(),z(s.id,s.name)},children:e.jsx(te,{className:"w-4 h-4"})})]})]})]},s.id))}):e.jsx(f,{className:"border-dashed",children:e.jsxs(N,{className:"flex flex-col items-center justify-center py-16",children:[e.jsx("div",{className:"rounded-full bg-muted p-6 mb-4",children:e.jsx(P,{className:"w-12 h-12 text-muted-foreground"})}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:a?"No public playlists found":"No playlists yet"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-6 text-center max-w-md",children:a?"Be the first to share a public playlist with the community":"Create your first playlist to organize your favorite tracks by mood, genre, or theme"}),!a&&e.jsxs(t,{onClick:()=>l(!0),size:"lg",children:[e.jsx(v,{className:"w-5 h-5 mr-2"}),"Create Your First Playlist"]})]})})}),e.jsx(G,{open:C,onOpenChange:l,children:e.jsxs(H,{children:[e.jsxs(q,{children:[e.jsx(R,{children:"Create New Playlist"}),e.jsx(Y,{children:"Organize your favorite tracks into a playlist"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"playlist-name",children:"Playlist Name"}),e.jsx(K,{id:"playlist-name",placeholder:"My Awesome Playlist",value:o,onChange:s=>h(s.target.value),maxLength:100})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"playlist-description",children:"Description (optional)"}),e.jsx(Q,{id:"playlist-description",placeholder:"Tell others what this playlist is about...",value:x,onChange:s=>p(s.target.value),rows:3})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(u,{htmlFor:"is-public",children:"Public Playlist"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Allow others to view and discover this playlist"})]}),e.jsx(V,{id:"is-public",checked:j,onCheckedChange:y})]})]}),e.jsxs(J,{children:[e.jsx(t,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),e.jsx(t,{onClick:T,disabled:n.isPending,children:n.isPending?"Creating...":"Create Playlist"})]})]})})]})}export{Le as default};
